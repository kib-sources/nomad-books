# Кочевая библиотека
Первое описание

13.10.2024

Копия от https://t.me/c/1353860679/1422/2447


## Цели

 1. создать удобную систему офлайн библиотеки (с онлайн управлением) без библиотекаря и без помещения, с контролем обращения каждого экземпляра книги.
 2. создать культуру общения о прочитанных книгах вокруг реализации цели 1

## Решение
 1. Есть бумажные книги. На каждой книге есть QR код, ведущий на страницу доступа к данному экземпляру книги
 2. Книгу можно передать от одного владельца другому через мобильное приложение.
 3. Есть база данных с поиском. Можно забить книгу, увидеть все её экземпляры и понять, кто в настоящий момент имеет экземпляр книги и КАК долго.
 4. Если книга не нужна — её можно пометить как «свободную» в системе. Свободные — это первые книги на запрос в поиске. 
 5. Пока не забрали книгу — она хранится у последнего прочитавшего.
 6. Время от времени чат бот напоминает о книгах. Можно боту сказать «нет, я ещё читаю эту книгу», а можно сказать «да, уже книга свободная»
 7. (!) На книгах кроме QR кода можно давать рекламу фирм, которые проспонсировали их покупку. Как итог — большинство книг будут спонсорскими и, соотвественно, бесплатными для КИБ
 8. Если потерял книгу — компенсируй той же, либо другой по договорённости с КИБ
 9. Если нечестный — кидаем тебя в бан. Думаю большинство ребят будут честными. Если нет, то доступ к библиотеке только после аванса.
 10. Для администраторов: можно по базе данных сделать фильтры и увидеть у кого сколько книг, кто сколько книг читал, когда читал и т. д. Некий дополнительный источник информации при собеседовании
 11. Можно добавить обсуждение к книге (ссылка на Telegram чат?). Доступ по QR коду.
 12. Можно не просто передать книгу, а организовать встречу и кратко отрекомендовать + и — книги новому читающему. Тогда в системе тому кто потратил своё время появляется «+1 добринка». У кого больше добринок — тот в приоритете читает НОВЫЕ книги, попадающие в систему. Возможны другие поощрения.



## Описание системы

### Комплексные функции.

1. Регистрация
   1. Заходим в Telegram в чат-бот, говорим что хотим приложение
   2. Чат бот даёт уникальный код (действителен 24 часа) и ссылку на приложение
   3. Скачиваем Android приложение, вводим код. Telegram аккаунт подтвердился в приложении. 
   4. В приложении вводится ФИО, согласие на обработку перс.данных, мобильный телефон.
   5. Согласие с политикой кочевой библиотеки (что пишем там?)
   6. Бот выслал Telegram аккаунт в канал администраторов для подтверения.
   7. Админ принял нового пользователя
2. Блокировка
   1. Внутри приложения по кнопке или Через бота
   2. Бот высылает контакты админов для разблокировки
3. Разблокировка
   1. Написать админам
   2. Созвонится голосом
   3. Разблокировка
4. Регистрация новой книги (не экземпляра)
   1. Создаётся новая книга c уникальным  UUID (не путать с  UUID экземпляра книги). 
   2. Заполнение карточки (название, описание, автор и т.д.)
   3. Привязывается картинка
   4. Создаются слова для поиска
   5. Если есть аналогичная книга прошлых изданий — создаётся линк.
5. Регистрация нового экземпляра книги
    1. Если ещё нет описание книги, см. «Регистрация новой книги »
    2. Администратор создаёт цифровой экземпляр книги, получает уникальную UUID-cсылку. Статус — «init» 
    3. Администратор печатает QR код и приклеивает на экземляр книги. Ставит печати КИБ на первую, 17-ю и 239-ю (если есть) страницы книги. С помощью доступной только администраторам функции присваивает эту книгу себе. Статус -- «в обороте». Владелец — администратор.  
    4. [опционально] Можно в качестве свойства проставить, что данная книга является компенсацией другой книги.
6. Передача книги. 
   1. Владелец и будущий владелец встречаются в очном порядке. Владелец берёт с собой книгу.
   2. Владелец нажимает «передать книгу» и сканирует QR код. В системе статус меняется с «в обороте» на  «в процессе передачи». Если в течении часа никто не примит книгу — всё вренётся на круги своя
   3. Тот, кто хочет принят книгу нажимает «принять книгу» и сканирует QR код. В система статус меняется с «в процессе передачи» на «в обороте» + так же меняется владелец. 
   4. Старому и новому владельцам пишет чат-бот
7. Узнать статус всех книг, которые на руках
   1. Можно в приложении
   2. Можно через чат бота
8. Компенсировать потерянную книгу
   1. Написать в личку админу, согласовать компенсацию
   2. Владелец сам покупает книгу и физически отдаёт её админу
   3. Админ выясняет уникальный UUID книги, ставит статус «потеряна»
   4. Админ регистрирует новую книгу. Админ в свойствах книги проставляет что она есть компенсация потерянной. Статус старой книги меняется с «потеряна» на «потеряна и компенсирована», Статус новой «в обороте», владелец — админ.
9. Статус «в обороте+свободна».
   1. Выбирается книга, которая на руках. 
   2. Есть кнопка «освободить книгу». Жмакаем. Статус меняется. Теперь мы первые в поиске.
1. Статус «в обороте+активно читаю»
   1. Выбирается книга, которая на руках
   2. Есть кнопка «активно читаю», при нажатии она не доступна в течении 24 часов
   3. Через 24 часа кнопка вновь доступна. Чат-бот высылает информацию. Можно повторно нажать в приложении, или в чат-боте.
   4. Через 48 часов статус «в обороте+активно читаю» автоматически переходит «в обороте»
1. Поиск книги
   1. Поиск по автору, названию, краткому описанию, доп.ключевым словам.
   2. Показываются книги. Кликаем на книгу. Есть доп.поиск по изданию. По умолчанию — все издания.
   3. Вверху поиска экземпляры книги «в обороте+свободна», затем упорядоченны по тому, как долго они на руках. Книги «в обороте+активно читаю» отображаются в поиске в самом конце, но их Enadled = False. ВАЖНО: указан год экземпляра книги (ведь есть разные издания). 
   4. Кликаем на один из экземпляров и редирект на телеграмм. 
   5. Пишем в телеге и договариваемся об очной встрече. Далее смотри «передача книги». Технических правил нет, но если вы достаточно долго держите книгу — вы должны её отдать нуждающимся. 
1. Подарить книгу.
   1. Спросить админов, а нужна ли такая книга в кочевой библиотеке
   2. Если нужна, очно встретится с админом и подарить её
   3. Далее см. «регистрация новой книги»
1. Вернуть книгу. 
   1. Если человек уезжает надолго из России и\или хочет выйти из системы, нужно все книги передать админам. См. «Передача книги»
1. Добавить в избранное
   1. Все книги во время поиска можно добавить в избранное
1. Просмотреть историю
   1. Можно просмотреть историю всех книг которые когда-либо читал
1. Подписаться на уведомление.
   1. Если нет ни одной книги со статусом «в обороте+свободна», то можно подписаться. Как только книга освободится — вам напишет чат-бот. 
   2. Важно: если несколько подписчиков, то чат бот спрашивает нужна ли книга? Если в течении 24 часов чат-боту не отвечают что нужна, он переходит к следующему подписчику а старому говорит — «поезд ушёл»
   3. Если кто-либо подписан на книгу, то все кто держат книгу дольше N дней получают уведомление от чат-бота «Эта книга нужна нуждающимся… У вас 7 дней чтобы дочитать её. Если она уже сейчас не нужна — поменяйте статус»

### Компоненты

1. Бекенд: база данных, бекенд-сервер для обработки запросов
2. Фронт: Android приложение
3. Фронт: чат-бот
4. Команда админов, регламент работы админов. 
5. (?) Амбосадоры в каждом ВУЗ-е.
6. Компании-спонсоры
7. (?) Ярмарка книг


### Разработка

1. Архитектура: Павел Слипенчук 
2. Разработка бекенда: Павел Слипенчук 
3. Разработчик Android: Тимофей Кочетков
4. IAM: Дмитрий Ромакин
5. Разработчик бота: Тимофей Кочетков
6. DevOps: (?) 
7. Тестировщики системы: (?) 3-5 чел.

### Команда админов. Требования

1. 2-3 человека
2. Служба поддержки — ответ через чат не реже раз в сутки
3. Можно было принять новые книги
4. Можно отказаться от Кочевой библиотеки и отдать книги в квартиру одного из админов

